{"remainingRequest":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\src\\components\\ChatList.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\src\\components\\ChatList.vue","mtime":1639576068424},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\css-loader\\dist\\cjs.js","mtime":1636798923408},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1636798924294},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\postcss-loader\\src\\index.js","mtime":1636798923792},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636798923061},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\vue-loader\\lib\\index.js","mtime":1636798923951}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jaGF0bGlzdCB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDYwcHg7CiAgICBib3R0b206IDQ4cHg7CiAgICBsZWZ0OiAwcHg7CiAgICByaWdodDogMHB4OwogICAgb3ZlcmZsb3cteTogc2Nyb2xsOwogICAgb3ZlcmZsb3cteDogaGlkZGVuOwogICAgcGFkZGluZzogMTBweDsKfQoKLmNoYXRsaXN0LWJvdHRvbSB7CiAgICBib3R0b206IDQ4cHg7Cn0KCi5jaGF0bGlzdC1ib3R0b20tY29sbGFwc2UgewogICAgYm90dG9tOiAxOThweDsKfQoKLmNoYXRsaXN0IHVsIHsKICAgIG1pbi1oZWlnaHQ6IDMwMHB4Owp9CgouY2hhdGxpc3QgdWwgLmNoYXQtbWluZSB7CiAgICB0ZXh0LWFsaWduOiByaWdodDsKICAgIHBhZGRpbmctbGVmdDogMDsKICAgIHBhZGRpbmctcmlnaHQ6IDYwcHg7Cn0KCi5jaGF0bGlzdCB1bCBsaSB7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAvKmZvbnQtc2l6ZTogMDsqLwogICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgIHBhZGRpbmctbGVmdDogNjBweDsKICAgIG1pbi1oZWlnaHQ6IDY4cHg7Cn0KCi5jaGF0LW1pbmUgLmNoYXQtdXNlciB7CiAgICBsZWZ0OiBhdXRvOwogICAgcmlnaHQ6IDNweDsKfQoKLmNoYXQtdXNlciB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBsZWZ0OiAzcHg7Cn0KCi5jaGF0LXRleHQsCi5jaGF0LXVzZXIgewogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgdmVydGljYWwtYWxpZ246IHRvcDsKICAgIC8qZm9udC1zaXplOiAxNHB4OyovCn0KCi5jaGF0LXVzZXIgaW1nIHsKICAgIHdpZHRoOiA0MHB4OwogICAgaGVpZ2h0OiA0MHB4OwogICAgYm9yZGVyLXJhZGl1czogMTAwJTsKfQoKLnRpbWUgewogICAgd2lkdGg6IDEwMCU7Cn0KCmNpdGUgewogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiA2MHB4OwogICAgdGV4dC1hbGlnbjogcmlnaHQ7Cn0KCmNpdGUgewogICAgZm9udC1zdHlsZTogbm9ybWFsOwogICAgbGluZS1oZWlnaHQ6IDI0cHg7CiAgICBmb250LXNpemU6IDEycHg7CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgY29sb3I6ICM5OTk7CiAgICB0ZXh0LWFsaWduOiBsZWZ0Owp9CgpjaXRlIGkgewogICAgZm9udC1zdHlsZTogbm9ybWFsOwogICAgcGFkZGluZy1sZWZ0OiA1cHg7CiAgICBwYWRkaW5nLXJpZ2h0OiA1cHg7CiAgICBmb250LXNpemU6IDEycHg7Cn0KCi5jaGF0LW1pbmUgLmNoYXQtdGV4dCB7CiAgICBtYXJnaW4tbGVmdDogMDsKICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzNERjgzOwogICAgY29sb3I6ICNmZmY7Cn0KCi5jaGF0LXRleHQgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgbGluZS1oZWlnaHQ6IDIycHg7CiAgICAvKm1hcmdpbi10b3A6IDI1cHg7Ki8KICAgIHBhZGRpbmc6IDEwcHggMTVweDsKICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWU7CiAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICBjb2xvcjogIzMzMzsKICAgIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDsKICAgIG1heC13aWR0aDogNDYycHhcOTsKfQoKLmNoYXQtdGV4dCwKLmNoYXQtdXNlciB7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wOwogICAgZm9udC1zaXplOiAxNHB4Owp9CgouY2hhdC10ZXh0IGltZyB7CiAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwp9CgouY2hhdC11c2VyIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IDNweDsKfQoKLmNoYXQtdGV4dDphZnRlciB7CiAgICBjb250ZW50OiAnJzsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IC0xMHB4OwogICAgdG9wOiAxNXB4OwogICAgd2lkdGg6IDA7CiAgICBoZWlnaHQ6IDA7CiAgICBib3JkZXItc3R5bGU6IHNvbGlkIGRhc2hlZCBkYXNoZWQ7CiAgICBib3JkZXItY29sb3I6ICNlZWUgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQ7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgYm9yZGVyLXdpZHRoOiAxMHB4Owp9CgouY2hhdC1taW5lIC5jaGF0LXRleHQ6YWZ0ZXIgewogICAgbGVmdDogYXV0bzsKICAgIHJpZ2h0OiAtMTBweDsKICAgIGJvcmRlci10b3AtY29sb3I6ICMzM0RGODM7Cn0KCi5mb290IHsKICAgIHdpZHRoOiAxMDAlOwogICAgbWluLWhlaWdodDogNDhweDsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIGJvdHRvbTogMHB4OwogICAgbGVmdDogMHB4OwogICAgYmFja2dyb3VuZC1jb2xvcjogI0Y4RjhGODsKfQoKLmZvb3QgLmNvbiB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBsZWZ0OiA2NnB4OwogICAgcmlnaHQ6IDQwcHg7Cn0KCi5mb290IC5idG4tcGx1cyB7CiAgICB3aWR0aDogMjhweDsKICAgIHBhZGRpbmc6IDlweCAzcHg7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBsZWZ0OiAwcHg7CiAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICNkOWQ5ZDk7Cn0KCi5mb290IC5idG4tcGx1cyBpIHsKICAgIGZvbnQtc2l6ZTogMmVtOwogICAgY29sb3I6ICNjY2M7Cn0KCi5mb290IC5idG4tZmFjZSB7CiAgICB3aWR0aDogMjhweDsKICAgIHBhZGRpbmc6IDlweCAzcHggOXB4IDBweDsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IDM1cHg7CiAgICAvKmJvcmRlci1yaWdodDogMXB4IHNvbGlkICNkOWQ5ZDk7Ki8KfQoKLmZvb3QgLmJ0bi1mYWNlIGkgewogICAgZm9udC1zaXplOiAyZW07CiAgICBjb2xvcjogI2Q5ZDlkOTsKfQoKLmZvb3QgLnNlbGJveCB7CiAgICBoZWlnaHQ6IDE1MHB4OwogICAgbWFyZ2luLXRvcDogNDhweDsKICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZDlkOWQ5Owp9Cgouc2hvdyB7CiAgICBkaXNwbGF5OiBibG9jazsKfQoKLmhpZGUgewogICAgZGlzcGxheTogbm9uZTsKfQoKLmZhY2UtYm94IHsKICAgIC8qIHBvc2l0aW9uOiBhYnNvbHV0ZTsgKi8KICAgIC8qIHRvcDogNDhweDsgKi8KICAgIC8qIGxlZnQ6IDBweDsgKi8KICAgIC8qIHJpZ2h0OiAwcHg7ICovCiAgICAvKiBib3R0b206IDBweDsgKi8KICAgIHBhZGRpbmc6IDE1cHggMTVweCAwcHggMTVweDsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICB3aWR0aDogMjkwcHg7CiAgICBtYXJnaW46IDBweCBhdXRvOwogICAgaGVpZ2h0OiAxMzVweDsKfQoKLmZhY2UtYm94IGxpIHsKICAgIHdpZHRoOiAzMHB4OwogICAgZmxvYXQ6IGxlZnQ7CiAgICBwYWRkaW5nOiA2cHggMTBweCAwcHggOHB4Owp9CgouYnRuIHsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBsaW5lLWhlaWdodDogMzJweDsKICAgIG1hcmdpbi1sZWZ0OiA1cHg7CiAgICBwYWRkaW5nOiAwIDZweDsKICAgIGJhY2tncm91bmQtY29sb3I6ICMzM0RGODM7CiAgICBjb2xvcjogI2ZmZjsKICAgIGJvcmRlci1yYWRpdXM6IDNweDsKfQoKLmJ0bi1zZW5kIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHJpZ2h0OiAwcHg7CiAgICB0b3A6IDhweDsKfQo="},{"version":3,"sources":["ChatList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"ChatList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n\n        <section class=\"chatlist\" :class=\"showSelBox>0?'chatlist-bottom-collapse':'chatlist-bottom'\">\n            <mt-loadmore :top-method=\"loadTop\" top-pull-text=\"加载更多\" top-drop-text=\"释放加载\" @top-status-change=\"handleTopChange\" ref=\"loadmore\">\n                <ul>\n                    <div v-for=\"item in records\" :key=\"item.index\">\n                        <li class=\"chat-mine\" v-if=\"item.type==1\">\n                            <div class=\"chat-user\"><img src=\"../assets/user.png\"></div>\n                            <div class=\"time\"><cite><i>{{item.time}}</i>{{item.name}}</cite></div>\n                            <div class=\"chat-text\" v-html=\"replaceFace(item.content)\"></div>\n                        </li>\n                        <li v-if=\"item.type==2\">\n                            <div class=\"chat-user\"><img src=\"../assets/default.png\"></div>\n                            <div class=\"time\"><cite>{{item.name}}<i>{{item.time}}</i></cite></div>\n                            <div class=\"chat-text\" v-html=\"replaceFace(item.content)\"></div>\n                        </li>\n                    </div>\n                </ul>\n            </mt-loadmore>\n        </section>\n\n        <section class=\"foot\">\n            <mt-field id=\"txtContent\" placeholder=\"请输入消息\" class=\"con\" v-model=\"content\"></mt-field>\n            <span class=\"btn-face\" v-on:click=\"showSelBox=showSelBox==1?0:1\"><i class=\"fa fa-smile-o\" aria-hidden=\"true\"></i></span>\n            <span class=\"btn-plus\" v-on:click=\"showSelBox=showSelBox==2?0:2\"><i class=\"fa\" aria-hidden=\"true\" :class=\"showSelBox==2?'fa-minus-circle':'fa-plus-circle'\"></i></span>\n            <span class=\"btn btn-send\" v-on:click=\"sendMsg\">发送</span>\n            <section class=\"selbox\" :class=\"showSelBox>0?'show':'hide'\">\n                <section v-show=\"showSelBox==1\" class=\"face-box\">\n                    <mt-swipe :auto=\"0\" :continuous=\"false\">\n                        <mt-swipe-item v-for=\"n in Math.ceil(EXPS.length/18)\" :key=\"n\">\n                            <li v-for=\"(item, index) in getEXP(n,18)\" :key=\"index\">\n                                <img :src=\"'static/emotion/'+item.file\" alt=\"\" :data=\"item.code\" v-on:click=\"content+=item.code\">\n                            </li>\n                        </mt-swipe-item>\n                    </mt-swipe>\n                </section>\n                <div v-show=\"showSelBox==2\">{{selOther}}</div>\n            </section>\n        </section>\n\n    </div>\n</template>\n\n<script>\nimport util from '../utils/util.js'\nimport { Toast } from 'mint-ui';\n\nexport default {\n    name: 'chatlist',\n    data() {\n        return {\n            websock: null,\n            showSelBox: 0, // 0隐藏 1显示表情 2显示其他\n            selFace: '表情',\n            selOther: '其他功能',\n            content:'',\n            topStatus: '',\n            //聊天记录\n            records: [{\n                index: 1,\n                type: 1,\n                time: util.formatDate.format(new Date(),'yyyy-MM-dd hh:mm:ss'),\n                name: '田荫熙',\n                content: '你好，我是田荫熙'\n            }, {\n                index: 2,\n                type: 2,\n                time: util.formatDate.format(new Date(),'yyyy-MM-dd hh:mm:ss'),\n                name: '李怀武',\n                content: '你好，我是李怀武'\n            }],\n            // 表情\n            EXPS: [\n                { file: '100.gif', code: '/::)', title: '微笑',reg:/\\/::\\)/g },\n                { file: '101.gif', code: '/::~', title: '伤心',reg:/\\/::~/g },\n                { file: '102.gif', code: '/::B', title: '美女',reg:/\\/::B/g },\n                { file: '103.gif', code: '/::|', title: '发呆',reg:/\\/::\\|/g },\n                { file: '104.gif', code: '/:8-)', title: '墨镜',reg:/\\/:8-\\)/g },\n                { file: '105.gif', code: '/::<', title: '哭',reg:/\\/::</g },\n                { file: '106.gif', code: '/::$', title: '羞',reg:/\\/::\\$/g },\n                { file: '107.gif', code: '/::X', title: '哑',reg:/\\/::X/g },\n                { file: '108.gif', code: '/::Z', title: '睡',reg:/\\/::Z/g },\n                { file: '109.gif', code: '/::\\'(', title: '哭',reg:/\\/::'\\(/g },\n                { file: '110.gif', code: '/::-|', title: '囧',reg:/\\/::-\\|/g },\n                { file: '111.gif', code: '/::@', title: '怒',reg:/\\/::@/g },\n                { file: '112.gif', code: '/::P', title: '调皮',reg:/\\/::P/g },\n                { file: '113.gif', code: '/::D', title: '笑',reg:/\\/::D/g },\n                { file: '114.gif', code: '/::O', title: '惊讶',reg:/\\/::O/g },\n                { file: '115.gif', code: '/::(', title: '难过',reg:/\\/::\\(/g },\n                { file: '116.gif', code: '/::+', title: '酷',reg:/\\/::\\+/g },\n                { file: '117.gif', code: '/:--b', title: '汗',reg:/\\/:--b/g },\n                { file: '118.gif', code: '/::Q', title: '抓狂',reg:/\\/::Q/g },\n                { file: '119.gif', code: '/::T', title: '吐',reg:/\\/::T/g },\n                { file: '120.gif', code: '/:,@P', title: '笑',reg:/\\/:,@P/g },\n                { file: '121.gif', code: '/:,@-D', title: '快乐',reg:/\\/:,@-D/g },\n                { file: '122.gif', code: '/::d', title: '奇',reg:/\\/::d/g },\n                { file: '123.gif', code: '/:,@o', title: '傲' ,reg:/\\/:,@o/g},\n                { file: '124.gif', code: '/::g', title: '饿',reg:/\\/::g/g },\n                { file: '125.gif', code: '/:|-)', title: '累' ,reg:/\\/:\\|-\\)/g},\n                { file: '126.gif', code: '/::!', title: '吓',reg:/\\/::!/g },\n            ]\n        }\n    },\n    created() {\n      this.initWebSocket();\n    },\n    destroyed() {\n      this.websock.close() \n    },\n    methods: {\n        getEXP: function (pageNow,pageSize) {\n            return this.EXPS.slice((pageNow - 1) * pageSize, pageSize * pageNow)\n        },\n        //发送消息\n        sendMsg: function(){\n\n            if(this.content==''){\n                Toast('请输入消息');\n                return;\n            }\n\n            var send='1,2,'+this.content\n            this.websocketsend(send);\n\n            this.records.push({\n                type: 1,\n                time: util.formatDate.format(new Date(),'yyyy-MM-dd hh:mm:ss'),\n                name: '田荫熙',\n                content: this.content\n            });\n\n            // setTimeout(function(){\n            //     _this.records.push({\n            //         type: 2,\n            //         time: util.formatDate.format(new Date(),'yyyy-MM-dd hh:mm:ss'),\n            //         name: '李怀武',\n            //         content: '你好！'\n            //     });\n            // },100);\n\n            this.content='';\n\n            this.scrollToBottom();\n            //this.focusTxtContent();//聚焦输入框\n        \n        },\n      \n        focusTxtContent:function(){\n            document.querySelector(\"#txtContent input\").focus();\n        },\n    \n        scrollToBottom:function(){\n            setTimeout(function(){\n                var chatlist = document.getElementsByClassName('chatlist')[0];\n                chatlist.scrollTop=chatlist.scrollHeight;\n            },100);\n        },\n      \n        replaceFace:function(con){\n            //var _this=this;\n            var exps=this.EXPS;\n            for(var i=0;i<exps.length;i++){\n                //con = con.replace(new RegExp(exps[i].code,'g'), '<img src=\"static/emotion/' + exps[i].file +'\"  alt=\"\" />');\n                con = con.replace(exps[i].reg, '<img src=\"static/emotion/' + exps[i].file +'\"  alt=\"\" />');\n            }\n            return con;\n        },\n        handleTopChange(status) {\n            this.topStatus = status;\n        },\n        loadTop(id) {\n            var _this=this;\n            setTimeout(() => {\n                var chatlist = document.getElementsByClassName('chatlist')[0];\n                var oldHeight=chatlist.scrollHeight;\n\n                _this.records.unshift({\n                    type: 1,\n                    time: util.formatDate.format(new Date(),'yyyy-MM-dd hh:mm:ss'),\n                    name: '你',\n                    content: '你好！'\n                }, {\n                    type: 2,\n                    time: util.formatDate.format(new Date(),'yyyy-MM-dd hh:mm:ss'),\n                    name: '对方',\n                    content: '你好！'\n                });\n\n                setTimeout(function(){\n                    var newHeight=chatlist.scrollHeight;\n                    chatlist.scrollTop=newHeight-oldHeight;\n                },100);\n\n                this.$refs.loadmore.onTopLoaded(id);\n            }, 1500);\n        },\n      initWebSocket(){ //初始化weosocket\n        const wsuri = \"ws://localhost:8888/websocket\";\n        this.websock = new WebSocket(wsuri);\n        this.websock.onmessage = this.websocketonmessage;\n        this.websock.onopen = this.websocketonopen;\n        this.websock.onerror = this.websocketonerror;\n        this.websock.onclose = this.websocketclose;\n      },\n      websocketonopen(){ //连接建立之后执行send方法发送数据\n        let actions = \"1\";\n        // this.websocketsend(JSON.stringify(actions));\n        this.websocketsend(actions);\n      },\n      websocketonerror(){//连接建立失败重连\n        this.initWebSocket();\n      },\n      websocketonmessage(e){ //数据接收\n        console.log(e.data)\n        this.records.push({\n            type: 2,\n            time: util.formatDate.format(new Date(),'yyyy-MM-dd hh:mm:ss'),\n            name: '李怀武',\n            content: e.data\n        });\n        // const redata = JSON.parse(e.data);\n        // console.log('receive'+redata)\n      },\n      websocketsend(Data){//数据发送\n        this.websock.send(Data);\n        console.log('send'+Data)\n      },\n      websocketclose(e){  //关闭\n        console.log('断开连接',e);\n      },\n    },\n    mounted:function(){\n        this.scrollToBottom();\n        this.focusTxtContent();\n    }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\n    .chatlist {\n        position: absolute;\n        top: 60px;\n        bottom: 48px;\n        left: 0px;\n        right: 0px;\n        overflow-y: scroll;\n        overflow-x: hidden;\n        padding: 10px;\n    }\n    \n    .chatlist-bottom {\n        bottom: 48px;\n    }\n    \n    .chatlist-bottom-collapse {\n        bottom: 198px;\n    }\n    \n    .chatlist ul {\n        min-height: 300px;\n    }\n    \n    .chatlist ul .chat-mine {\n        text-align: right;\n        padding-left: 0;\n        padding-right: 60px;\n    }\n    \n    .chatlist ul li {\n        position: relative;\n        /*font-size: 0;*/\n        margin-bottom: 10px;\n        padding-left: 60px;\n        min-height: 68px;\n    }\n    \n    .chat-mine .chat-user {\n        left: auto;\n        right: 3px;\n    }\n    \n    .chat-user {\n        position: absolute;\n        left: 3px;\n    }\n    \n    .chat-text,\n    .chat-user {\n        display: inline-block;\n        vertical-align: top;\n        /*font-size: 14px;*/\n    }\n    \n    .chat-user img {\n        width: 40px;\n        height: 40px;\n        border-radius: 100%;\n    }\n    \n    .time {\n        width: 100%;\n    }\n    \n    cite {\n        left: auto;\n        right: 60px;\n        text-align: right;\n    }\n    \n    cite {\n        font-style: normal;\n        line-height: 24px;\n        font-size: 12px;\n        white-space: nowrap;\n        color: #999;\n        text-align: left;\n    }\n    \n    cite i {\n        font-style: normal;\n        padding-left: 5px;\n        padding-right: 5px;\n        font-size: 12px;\n    }\n    \n    .chat-mine .chat-text {\n        margin-left: 0;\n        text-align: left;\n        background-color: #33DF83;\n        color: #fff;\n    }\n    \n    .chat-text {\n        position: relative;\n        line-height: 22px;\n        /*margin-top: 25px;*/\n        padding: 10px 15px;\n        background-color: #eee;\n        border-radius: 3px;\n        color: #333;\n        word-break: break-all;\n        max-width: 462px\\9;\n    }\n    \n    .chat-text,\n    .chat-user {\n        display: inline-block;\n        vertical-align: top;\n        font-size: 14px;\n    }\n    \n    .chat-text img {\n        max-width: 100%;\n        vertical-align: middle;\n    }\n    \n    .chat-user {\n        position: absolute;\n        left: 3px;\n    }\n    \n    .chat-text:after {\n        content: '';\n        position: absolute;\n        left: -10px;\n        top: 15px;\n        width: 0;\n        height: 0;\n        border-style: solid dashed dashed;\n        border-color: #eee transparent transparent;\n        overflow: hidden;\n        border-width: 10px;\n    }\n    \n    .chat-mine .chat-text:after {\n        left: auto;\n        right: -10px;\n        border-top-color: #33DF83;\n    }\n    \n    .foot {\n        width: 100%;\n        min-height: 48px;\n        position: fixed;\n        bottom: 0px;\n        left: 0px;\n        background-color: #F8F8F8;\n    }\n    \n    .foot .con {\n        position: absolute;\n        left: 66px;\n        right: 40px;\n    }\n    \n    .foot .btn-plus {\n        width: 28px;\n        padding: 9px 3px;\n        position: absolute;\n        left: 0px;\n        border-left: 1px solid #d9d9d9;\n    }\n    \n    .foot .btn-plus i {\n        font-size: 2em;\n        color: #ccc;\n    }\n    \n    .foot .btn-face {\n        width: 28px;\n        padding: 9px 3px 9px 0px;\n        position: absolute;\n        left: 35px;\n        /*border-right: 1px solid #d9d9d9;*/\n    }\n    \n    .foot .btn-face i {\n        font-size: 2em;\n        color: #d9d9d9;\n    }\n    \n    .foot .selbox {\n        height: 150px;\n        margin-top: 48px;\n        border-top: 1px solid #d9d9d9;\n    }\n    \n    .show {\n        display: block;\n    }\n    \n    .hide {\n        display: none;\n    }\n    \n    .face-box {\n        /* position: absolute; */\n        /* top: 48px; */\n        /* left: 0px; */\n        /* right: 0px; */\n        /* bottom: 0px; */\n        padding: 15px 15px 0px 15px;\n        overflow: hidden;\n        width: 290px;\n        margin: 0px auto;\n        height: 135px;\n    }\n    \n    .face-box li {\n        width: 30px;\n        float: left;\n        padding: 6px 10px 0px 8px;\n    }\n    \n    .btn {\n        display: inline-block;\n        vertical-align: top;\n        font-size: 14px;\n        line-height: 32px;\n        margin-left: 5px;\n        padding: 0 6px;\n        background-color: #33DF83;\n        color: #fff;\n        border-radius: 3px;\n    }\n    \n    .btn-send {\n        position: absolute;\n        right: 0px;\n        top: 8px;\n    }\n</style>"]}]}