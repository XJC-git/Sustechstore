{"remainingRequest":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\src\\views\\Overview.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\src\\views\\Overview.vue","mtime":1640614577653},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\css-loader\\dist\\cjs.js","mtime":1636798923408},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1636798924294},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\postcss-loader\\src\\index.js","mtime":1636798923792},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636798923061},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\vue-loader\\lib\\index.js","mtime":1636798923951}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI292ZXJ2aWV3LWNhcmQgewogIHdpZHRoOiA3NSU7CiAgYm9yZGVyLXJhZGl1czogMTVweDsKICBtYXJnaW46IGF1dG87CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IDEyLjUlOwogIG1hcmdpbi10b3A6IDgwcHg7CiAgei1pbmRleDogNTsKfQojb3ZlcnZpZXctdGl0bGUgewogIHRleHQtYWxpZ246IGxlZnQ7CiAgbWFyZ2luLWxlZnQ6IDQwcHg7Cn0KI3NlbGVjdC1jYXJkIHsKICBib3JkZXItY29sb3I6IGRhcmtncmF5OwogIG1hcmdpbi1ib3R0b206MjBweDsKICBib3JkZXItcmFkaXVzOiAwcHg7Cn0KLmVsLWNhcmRfX2JvZHkgewogIHBhZGRpbmctdG9wOiAwcHg7CiAgcGFkZGluZy1ib3R0b206IDEwcHg7Cn0KLnNlbGVjdC1saW5lIHsKICBtYXJnaW4tYm90dG9tOjEwcHg7CiAgbWFyZ2luLXRvcDoxMHB4OwogIHRleHQtYWxpZ246bGVmdDsKfQouaXRlbS1jYXJkewogIGJhY2tncm91bmQ6I2ZiZmJmYjsKICB3aWR0aDogMTAwJTsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgbWFyZ2luOiAwLjNlbTsKICBib3JkZXItcmFkaXVzOjIwcHg7Cn0KLm1lcmNoYW5kaXNlLXRleHR7CiAgdGV4dC1hbGlnbjogbGVmdDsKICBjb2xvcjogZGFya2dyZXk7CiAgbWFyZ2luLXRvcDogMHB4OwogIGhlaWdodDo2MHB4Cn0KLmVsLWRpdmlkZXIgewogIG1hcmdpbi10b3A6IDEwcHg7CiAgbWFyZ2luLWJvdHRvbTogMTBweDsKfQoubWVyY2hhbmRpc2UtaW1nIHsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KLm1lcmNoYW5kaXNlLW5hbWV7CiAgZm9udC1zaXplOjIwcHg7CiAgdGV4dC1hbGlnbjpsZWZ0OwogIGZvbnQtd2VpZ2h0OmJvbGQ7CiAgbWFyZ2luLXRvcDowcHg7CiAgbWFyZ2luLWJvdHRvbTogMTBweDsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KLm1lcmNoYW5kaXNlLXByaWNlewogIHRleHQtYWxpZ246bGVmdDsKICBjb2xvcjojRkY1ODA5OwogIG1hcmdpbi10b3A6MjBweDsKICBtYXJnaW4tYm90dG9tOjIwcHg7CiAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgZm9udC1zaXplOiAyNHB4OwogIGN1cnNvcjogcG9pbnRlcjsKfQo="},{"version":3,"sources":["Overview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Overview.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"overview-main\">\r\n\r\n    <el-backtop></el-backtop>\r\n\r\n    <HeaderBar></HeaderBar>\r\n\r\n    <SearchBox style=\"z-index:20;position:absolute;width:100%\"></SearchBox> \r\n\r\n    <el-card id=\"overview-card\">\r\n      <el-row type=\"flex\" justify=\"center\">\r\n        <el-col>\r\n          <h3 id=\"overview-title\">以下为商品: “{{search_name}}”搜索结果:</h3>\r\n        </el-col>\r\n      </el-row>\r\n      \r\n      <el-row type=\"flex\" justify=\"center\">\r\n        <el-col>\r\n          <el-card shadow=\"never\" class=\"item-card\" v-for=\"item in items\" :key=item.id>\r\n            <el-row type=\"flex\" justify=\"center\" style=\"margin-top:20px\">\r\n\r\n              <el-col :span=\"6\">\r\n                <img :src=\"dictionary[item.id]\" class=\"merchandise-img\" @click=\"goGoods\"> \r\n              </el-col>\r\n\r\n              <el-col :span=\"18\">\r\n                <el-row type=\"flex\" justify=\"center\">\r\n                  <el-col>\r\n                    <h3 class=\"merchandise-name\" @click=\"goGoods(item.id)\">{{item.name}}</h3> \r\n                  </el-col>\r\n                </el-row>\r\n\r\n                <el-row>\r\n                  <el-col>\r\n                    <h3 class=\"merchandise-name\">卖家: {{item.publisher}}</h3>\r\n                  </el-col>\r\n                </el-row>\r\n\r\n                <p class=\"merchandise-text\">商品简介: {{item.description}}</p>\r\n\r\n                <el-row type=\"flex\" justify=\"center\" style=\"height:40px\" align=\"middle\">\r\n                  <el-col :span=\"16\">\r\n                    <h3 class=\"merchandise-price\">￥{{item.price}}</h3> \r\n                  </el-col>\r\n                  <el-col :span=\"4\">\r\n                    <el-button style=\"height:100%\" plain @click=\"addTrolley(item.id)\">加入购物车</el-button>\r\n                  </el-col>\r\n                  <el-col :span=\"4\">\r\n                    <el-button style=\"height:100%\" @click=\"buyItem(item.id)\">立即购买</el-button>\r\n                  </el-col>\r\n                </el-row>\r\n                 \r\n              </el-col>\r\n\r\n            </el-row>\r\n          </el-card>\r\n        </el-col>\r\n      </el-row>\r\n    </el-card>\r\n\r\n    <el-dialog title=\"购买商品\" :visible.sync=\"dialogVisible\" width=\"50%\" center>\r\n      <el-row type=\"flex\">您想要购买的商品为: {{item_buy.name}}</el-row>\r\n      <el-row type=\"flex\" style=\"margin-top:20px;\">价格: ￥{{item_buy.price}}</el-row>\r\n      <el-row type=\"flex\" style=\"margin-top:20px;\">交易地点(请先和卖家商量好哦!):</el-row>\r\n      <el-input maxlength=\"150\" type=\"textarea\" autosize :rows=\"2\" placeholder=\"请输入地点\" v-model=\"location\"></el-input>\r\n      <el-dialog width=\"30%\" title=\"购买结果\" :visible.sync=\"innerVisible\" append-to-body>\r\n        <el-row type=\"flex\">{{result_txt}}</el-row>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button type=\"primary\" @click=\"innerVisible = false\">{{button_text}}</el-button>\r\n        </span>\r\n      </el-dialog>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取消购买</el-button>\r\n        <el-button type=\"primary\" @click=\"sendBuyInfo\">确定购买</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <FootBar></FootBar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SearchBox  from '../components/SearchBox.vue'\r\nimport HeaderBar from '../components/HeaderBar.vue'\r\nimport FootBar from '../components/FootBar.vue'\r\nimport axios from 'axios'\r\n\r\n    export default {\r\n        data() \r\n        {\r\n            return {\r\n                search_name: \"\",\r\n                price_radio: '',\r\n                size_radio: '',\r\n                quaility_radio: '',\r\n                items: null,\r\n                dictionary: {},\r\n                first: false,\r\n                money:null,\r\n                dialogVisible: false,\r\n                innerVisible: false,\r\n                location:'',\r\n                answer: null,\r\n                result_txt: '',\r\n                button_text: '',\r\n                id: '0',\r\n                item_buy: {'name':'','price':'','id':''},\r\n            };\r\n        },\r\n        methods: {\r\n          goGoods(id) {\r\n            this.$store.commit('SET_RELOAD', true)\r\n            this.$store.commit('SET_SLO_IND', 4)\r\n            this.$store.commit('SET_ITEM_ID', id)\r\n            this.$router.push('/goods')\r\n          },\r\n          async addTrolley(id) {\r\n            if(this.$store.state.user.user == null) {\r\n              this.$confirm(\"您还未登录，请先登录再将商品加入购物车\", '警告', {\r\n              confirmButtonText: '确定',\r\n              type: 'warning'})\r\n            }\r\n            else {\r\n              let fileList = new FormData()\r\n              fileList.append('itemId', id)\r\n              await axios({\r\n                url:\"/root\"+'/trolley/add',\r\n                method: 'post',\r\n                data: fileList\r\n              }).then(res => (console.log(res)))\r\n              this.$confirm('加入购物车成功! 是否前往购物车查看？', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'success'\r\n              }).then(() => {\r\n                this.$store.commit('SET_SLO_IND', 3)\r\n                this.$store.commit('SET_RELOAD', true)\r\n                this.$router.push('/trolley')\r\n              })\r\n            }\r\n          },\r\n          async buyItem(id) {\r\n            this.id = id\r\n            if(this.$store.state.user.user == null) {\r\n              this.$confirm(\"您还未登录，请先登录再购买商品\", '警告', {\r\n              confirmButtonText: '确定',\r\n              type: 'warning'})\r\n            }\r\n            else {\r\n              await axios({\r\n                url:\"/root\"+'/getmoney',\r\n                method: 'get'\r\n              }).then(res => (\r\n                this.money = parseFloat(res.data) \r\n              ))\r\n              console.log(this.money)\r\n              for(let i=0;i<this.items.length;i++) {\r\n                if(this.items[i].id == id) {\r\n                  this.item_buy = this.items[i]\r\n                  break\r\n                }\r\n              }\r\n              if(this.money < parseFloat(this.item_buy.price)) {\r\n                this.$confirm(\"您的账户余额不足，请充值后再进行购买! \", '警告', {\r\n                  confirmButtonText: '确定',\r\n                  type: 'warning'})\r\n              }\r\n              else {\r\n                this.dialogVisible = true\r\n              }\r\n            }\r\n          },\r\n          async sendBuyInfo() {\r\n            let fileList =  new FormData()\r\n            fileList.append('itemID', this.id)\r\n            fileList.append('location', this.location)\r\n            await axios({\r\n                url:\"/root\"+'/trolley/buy',\r\n                method: 'post',\r\n                data: fileList\r\n            }).then(res => {\r\n              this.answer = res.data\r\n              this.innerVisible = true\r\n              this.dialogVisible = false\r\n            })\r\n            if (this.answer == \"1\"){\r\n              this.result_txt = \"购买成功!一封确认邮件已经发至您的邮箱!\"\r\n              this.button_text = \"太棒了!\"\r\n            }\r\n            else {\r\n              this.result_txt = \"购买失败，好像出了点小问题...\"\r\n              this.button_text = \"啊这...\"\r\n            }\r\n          }\r\n        },\r\n        components: {\r\n          SearchBox,\r\n          HeaderBar,\r\n          FootBar\r\n        },\r\n        async mounted() {\r\n          this.search_name = this.$store.state.SearchInfo.Keyword\r\n          this.first = this.$store.state.image_store.reload\r\n          let formdata = new FormData()\r\n          formdata.append(\"searchText\", this.search_name)\r\n          await axios({\r\n            url:\"/root\"+\"/search\",\r\n            method:'post',\r\n            data:formdata,\r\n          }).then(res => (this.items = res.data))\r\n          let i = 0\r\n          for(i;i<this.items.length;i++){\r\n            if(this.items[i].fileList.length > 0){\r\n              let pic_name = this.items[i].fileList[0]\r\n              let item_id = this.items[i].id\r\n              await this.$axios.get(\"/root\"+\"/items/picture/\"+pic_name)\r\n              .then((result) => {\r\n                this.dictionary[item_id] = result.data\r\n              })\r\n            }\r\n          }\r\n          await this.$store.commit('SET_IMG', this.dictionary)\r\n          if(this.first){\r\n            this.$router.push('/blank')\r\n            this.$store.commit('SET_RELOAD', false)\r\n          }\r\n        },\r\n        updated() {\r\n          this.dictionary = this.$store.state.image_store.images\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n  #overview-card {\r\n    width: 75%;\r\n    border-radius: 15px;\r\n    margin: auto;\r\n    position: absolute;\r\n    left: 12.5%;\r\n    margin-top: 80px;\r\n    z-index: 5;\r\n  }\r\n  #overview-title {\r\n    text-align: left;\r\n    margin-left: 40px;\r\n  }\r\n  #select-card {\r\n    border-color: darkgray;\r\n    margin-bottom:20px;\r\n    border-radius: 0px;\r\n  }\r\n  .el-card__body {\r\n    padding-top: 0px;\r\n    padding-bottom: 10px;\r\n  }\r\n  .select-line {\r\n    margin-bottom:10px;\r\n    margin-top:10px;\r\n    text-align:left;\r\n  }\r\n  .item-card{\r\n    background:#fbfbfb;\r\n    width: 100%;\r\n    display: inline-block;\r\n    margin: 0.3em;\r\n    border-radius:20px;\r\n  }\r\n  .merchandise-text{\r\n    text-align: left;\r\n    color: darkgrey;\r\n    margin-top: 0px;\r\n    height:60px\r\n  }\r\n  .el-divider {\r\n    margin-top: 10px;\r\n    margin-bottom: 10px;\r\n  }\r\n  .merchandise-img {\r\n    cursor: pointer;\r\n  }\r\n  .merchandise-name{\r\n    font-size:20px;\r\n    text-align:left;\r\n    font-weight:bold;\r\n    margin-top:0px;\r\n    margin-bottom: 10px;\r\n    cursor: pointer;\r\n  }\r\n  .merchandise-price{\r\n    text-align:left;\r\n    color:#FF5809;\r\n    margin-top:20px;\r\n    margin-bottom:20px;\r\n    font-weight: bold;\r\n    font-size: 24px;\r\n    cursor: pointer;\r\n  }\r\n</style>"]}]}