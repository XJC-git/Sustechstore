{"remainingRequest":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\src\\views\\Login.vue","mtime":1639577925894},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636798923061},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\babel-loader\\lib\\index.js","mtime":1636798923794},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636798923061},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\vue-loader\\lib\\index.js","mtime":1636798923951}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSAoKSB7CiAgICB2YXIgY2hlY2tOYW1lID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcign55So5oi35ZCN5LiN6IO95Li656m6JykpCiAgICAgIH0KICAgICAgY2FsbGJhY2soKQogICAgfQogICAgdmFyIHZhbGlkYXRlUGFzcyA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKHZhbHVlID09PSAnJykgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5a+G56CBJykpCiAgICAgIH0KICAgICAgY2FsbGJhY2soKQogICAgfQogICAgcmV0dXJuIHsKICAgICAgbG9naW5Gb3JtOiB7CiAgICAgICAgdXNlcm5hbWU6ICcnLAogICAgICAgIHBhc3M6ICcnCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgcGFzczogWwogICAgICAgICAgeyB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzcywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIHVzZXJuYW1lOiBbCiAgICAgICAgICB7IHZhbGlkYXRvcjogY2hlY2tOYW1lLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0KICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0Rm9ybSAoZm9ybU5hbWUpIHsKICAgICAgY29uc3QgdGhhdCA9IHRoaXMKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoYXN5bmMgKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBhd2FpdCB0aGlzLiRheGlvcy5wb3N0KCcvcm9vdCcrJy9sb2dpbicsIHsKICAgICAgICAgICAgdXNlcm5hbWU6IHRoaXMubG9naW5Gb3JtLnVzZXJuYW1lLAogICAgICAgICAgICBwYXNzOiB0aGlzLmxvZ2luRm9ybS5wYXNzCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICAgIGlmIChyZXNwLnN0YXR1cyA9PT0gMjAwKSB7IC8vIHJlc3AuZGF0YeihqOekuui/lOWbnueahOaVsOaNrgogICAgICAgICAgICAgIHRoYXQuJHN0b3JlLmNvbW1pdCgnU0VUX1RPS0VOJywgcmVzcC5kYXRhLnRva2VuKQogICAgICAgICAgICB9CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5lcnJvcign55So5oi35ZCN5oiW5a+G56CB6ZSZ6K+vJykKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIGF3YWl0IHRoaXMuJGF4aW9zLmdldCgnL2InKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKQogICAgICAgICAgICAgIHRoYXQuJHN0b3JlLmNvbW1pdCgnU0VUX1VTRVInLCBKU09OLnN0cmluZ2lmeShyZXMuZGF0YSkpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICBhd2FpdCB0aGlzLiRheGlvcy5nZXQoJy9pY29uJykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSkKICAgICAgICAgICAgICB0aGF0LiRzdG9yZS5jb21taXQoJ1NFVF9JTUcnLCByZXMuZGF0YSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfmj5DkuqTplJnor68nKQogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICAgIGF3YWl0IHRoYXQuJHJvdXRlci5wdXNoKCcvY2VudGVyJykKICAgICAgfSkKICAgIH0sCiAgICByZXNldEZvcm0gKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCkKICAgIH0sCiAgICBSZWdpc3RlciAoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcmVnaXN0ZXInKQogICAgfQogIH0KfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"main\">\n    <div class=\"loginbox\">\n      <div class=\"loginbox-in\">\n        <div class=\"name\">SUSTech Store</div>\n        <el-form :model=\"loginForm\" status-icon :rules=\"rules\" ref=\"loginForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n          <el-form-item label=\"用户名\" prop=\"username\">\n            <el-input v-model=\"loginForm.username\" auto-complete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"密码\" prop=\"pass\">\n            <el-input type=\"password\" v-model=\"loginForm.pass\" auto-complete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item>\n            <el-button  type=\"primary\" size = 'medium' @click=\"submitForm('loginForm')\">提交</el-button>\n            <el-button  size='medium' @click=\"resetForm('loginForm')\">重置</el-button>\n          </el-form-item>\n          <el-form-item>\n            <el-button size=\"medium\" @click=\"Register()\">注册</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n      <div class=\"background\">\n        <div class=\"title\">Welcome to SUSTech Store</div>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  data () {\n    var checkName = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('用户名不能为空'))\n      }\n      callback()\n    }\n    var validatePass = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请输入密码'))\n      }\n      callback()\n    }\n    return {\n      loginForm: {\n        username: '',\n        pass: ''\n      },\n      rules: {\n        pass: [\n          { validator: validatePass, trigger: 'blur' }\n        ],\n        username: [\n          { validator: checkName, trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    submitForm (formName) {\n      const that = this\n      this.$refs[formName].validate(async (valid) => {\n        if (valid) {\n          await this.$axios.post('/root'+'/login', {\n            username: this.loginForm.username,\n            pass: this.loginForm.pass\n          }).then(function (resp) {\n            if (resp.status === 200) { // resp.data表示返回的数据\n              that.$store.commit('SET_TOKEN', resp.data.token)\n            }\n          }).catch(function (error) {\n            if (error.response) {\n              that.$message.error('用户名或密码错误')\n            }\n          })\n          await this.$axios.get('/b').then(function (res) {\n            if (res.status === 200) {\n              console.log(res.data)\n              that.$store.commit('SET_USER', JSON.stringify(res.data))\n            }\n          })\n          await this.$axios.get('/icon').then(function (res) {\n            if (res.status === 200) {\n              console.log(res.data)\n              that.$store.commit('SET_IMG', res.data)\n            }\n          })\n        } else {\n          this.$message.warning('提交错误')\n          return false\n        }\n        await that.$router.push('/center')\n      })\n    },\n    resetForm (formName) {\n      this.$refs[formName].resetFields()\n    },\n    Register () {\n      this.$router.push('/register')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.loginbox{\n  display:flex;\n  position:absolute;\n  width:800px;\n  height:400px;\n  top:45%;\n  left:50%;\n  transform:translate(-50%,-50%);\n  box-shadow: 0 12px 16px 0  rgba(0,0,0,0.24), 0 17px 50px 0 #4E655D;\n}\n.loginbox-in{\n  background-image: url('./../assets/b.jpg');\n  width:250px;\n}\n.background{\n  width:570px;\n  background-image:url('./../assets/b.jpg');\n  background-size:560px 450px;\n  font-family:Helvetica Neue,serif;\n}\n.title{\n  margin-top:75px;\n  font-weight:bold;\n  font-size:20px;\n  color:#4E655D;\n}\n\n.demo-ruleForm{\n  margin-top:30px;\n  margin-left:-30px;\n}\n.name{\n  margin-top:40px;\n  font-weight:bold;\n  font-size:30px;\n  font-family: 微软雅黑,serif;\n  color: #0e0101;\n}\n.main{\n  background-image: url(\"./../assets/back.jpg\");\n  width:100%;\n  height:100%;\n  position:fixed;\n  background-size:100% 100%\n}\n</style>\n"]}]}