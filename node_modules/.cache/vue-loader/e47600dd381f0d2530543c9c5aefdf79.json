{"remainingRequest":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\src\\components\\SearchBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\src\\components\\SearchBox.vue","mtime":1636968506568},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636798923061},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\babel-loader\\lib\\index.js","mtime":1636798923794},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636798923061},{"path":"D:\\学习历史资料\\大三上学期\\面向对象\\Project\\sustech-store\\node_modules\\vue-loader\\lib\\index.js","mtime":1636798923951}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgU3RvcmUgZnJvbSAiLi4vdXRpbHMvU3RvcmUiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBzZWFyY2g6ICIiLCAvL+W9k+WJjei+k+WFpeahhueahOWAvA0KICAgICAgaXNGb2N1czogZmFsc2UsIC8v5piv5ZCm6IGa54SmDQogICAgICBob3RTZWFyY2hMaXN0OiBbIuaaguaXoOeDremXqOaQnOe0oiJdLCAvL+eDremXqOaQnOe0ouaVsOaNrg0KICAgICAgaGlzdG9yeVNlYXJjaExpc3Q6IFtdLCAvL+WOhuWPsuaQnOe0ouaVsOaNrg0KICAgICAgc2VhcmNoTGlzdDogWyLmmoLml6DmlbDmja4iXSwgLy/mkJzntKLov5Tlm57mlbDmja4sDQogICAgICBoaXN0b3J5OiBmYWxzZQ0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBmb2N1cygpIHsNCiAgICAgIHRoaXMuaXNGb2N1cyA9IHRydWU7DQogICAgICB0aGlzLmhpc3RvcnlTZWFyY2hMaXN0ID0NCiAgICAgICAgU3RvcmUubG9hZEhpc3RvcnkoKSA9PSBudWxsID8gW10gOiBTdG9yZS5sb2FkSGlzdG9yeSgpOw0KICAgICAgdGhpcy5oaXN0b3J5ID0gdGhpcy5oaXN0b3J5U2VhcmNoTGlzdC5sZW5ndGggPT0gMCA/IGZhbHNlIDogdHJ1ZTsNCiAgICB9LA0KICAgIGJsdXIoKSB7DQogICAgICB2YXIgc2VsZiA9IHRoaXM7DQogICAgICB0aGlzLnNlYXJjaEJveFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgew0KICAgICAgICBzZWxmLmlzRm9jdXMgPSBmYWxzZTsNCiAgICAgIH0sIDMwMCk7DQogICAgfSwNCiAgICBlbnRlclNlYXJjaEJveEhhbmxkZXIoKSB7DQogICAgICBjbGVhclRpbWVvdXQodGhpcy5zZWFyY2hCb3hUaW1lb3V0KTsNCiAgICB9LA0KICAgIHNlYXJjaEhhbmRsZXIoKSB7DQogICAgICBsZXQgZXhpc3QgPQ0KICAgICAgICB0aGlzLmhpc3RvcnlTZWFyY2hMaXN0LmZpbHRlcih2YWx1ZSA9PiB7DQogICAgICAgICAgcmV0dXJuIHZhbHVlLm5hbWUgPT0gdGhpcy5zZWFyY2g7DQogICAgICAgIH0pLmxlbmd0aCA9PSAwDQogICAgICAgICAgPyBmYWxzZQ0KICAgICAgICAgIDogdHJ1ZTsNCiAgICAgIGlmICghZXhpc3QpIHsNCiAgICAgICAgdGhpcy5oaXN0b3J5U2VhcmNoTGlzdC5wdXNoKHsgbmFtZTogdGhpcy5zZWFyY2gsIHR5cGU6ICJpbmZvIiB9KTsNCiAgICAgICAgU3RvcmUuc2F2ZUhpc3RvcnkodGhpcy5oaXN0b3J5U2VhcmNoTGlzdCk7DQogICAgICB9DQogICAgICB0aGlzLmhpc3RvcnkgPSB0aGlzLmhpc3RvcnlTZWFyY2hMaXN0Lmxlbmd0aCA9PSAwID8gZmFsc2UgOiB0cnVlOw0KICAgIH0sDQogICAgY2xvc2VIYW5kbGVyKHNlYXJjaCkgew0KICAgICAgdGhpcy5oaXN0b3J5U2VhcmNoTGlzdC5zcGxpY2UodGhpcy5oaXN0b3J5U2VhcmNoTGlzdC5pbmRleE9mKHNlYXJjaCksIDEpOw0KICAgICAgU3RvcmUuc2F2ZUhpc3RvcnkodGhpcy5oaXN0b3J5U2VhcmNoTGlzdCk7DQogICAgICBjbGVhclRpbWVvdXQodGhpcy5zZWFyY2hCb3hUaW1lb3V0KTsNCiAgICAgIGlmICh0aGlzLmhpc3RvcnlTZWFyY2hMaXN0Lmxlbmd0aCA9PSAwKSB7DQogICAgICAgIHRoaXMuaGlzdG9yeSA9IGZhbHNlOw0KICAgICAgfQ0KICAgIH0sDQogICAgcmVtb3ZlQWxsSGlzdG9yeSgpIHsNCiAgICAgIFN0b3JlLnJlbW92ZUFsbEhpc3RvcnkoKTsNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgaXNIaXN0b3J5U2VhcmNoKCkgew0KICAgICAgcmV0dXJuIHRoaXMuaXNGb2N1cyAmJiAhdGhpcy5zZWFyY2g7DQogICAgfSwNCiAgICBpc1NlYXJjaExpc3QoKSB7DQogICAgICByZXR1cm4gdGhpcy5pc0ZvY3VzICYmIHRoaXMuc2VhcmNoOw0KICAgIH0sDQogICAgaXNTZWFyY2goKSB7DQogICAgICByZXR1cm4gdGhpcy5pc0ZvY3VzOw0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["SearchBox.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SearchBox.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div style=\"background:#eeeeee\">\r\n    <el-row type=\"flex\" justify=\"center\">\r\n      <el-col :span=\"10\" class=\"center\" >\r\n        <el-input\r\n          v-model=\"search\"\r\n          @focus=\"focus\"\r\n          @blur=\"blur\"\r\n          @keyup.enter.native=\"searchHandler\"\r\n          placeholder=\"你想买什么，你想卖什么？\"\r\n        >\r\n          <el-button slot=\"append\" icon=\"el-icon-search\" id=\"search\" @click=\"searchHandler\">搜索</el-button>\r\n        </el-input>\r\n        <!---设置z-index优先级,防止被走马灯效果遮挡-->\r\n        <el-card\r\n          @mouseenter=\"enterSearchBoxHanlder\"\r\n          v-if=\"isSearch\"\r\n          class=\"box-card\"\r\n          id=\"search-box\"\r\n          style=\"z-index:2\"\r\n        >\r\n          <dl v-if=\"isHistorySearch\">\r\n            <dt class=\"search-title\" v-if=\"history\">历史搜索</dt>\r\n            <el-button class=\"remove-history\" v-if=\"history\" @click=\"removeAllHistory\" icon=\"el-icon-delete\">\r\n              清空历史记录\r\n            </el-button>\r\n            <el-tag\r\n              v-for=\"search in historySearchList\"\r\n              :key=\"search.id\"\r\n              closable\r\n              :type=\"search.type\"\r\n              @close=\"closeHandler(search)\"\r\n              style=\"margin-right:5px; margin-bottom:5px;\"\r\n            >{{search.name}}</el-tag>\r\n            <dt class=\"search-title\">热门搜索</dt>\r\n            <dd v-for=\"search in hotSearchList\" :key=\"search.id\">{{search}}</dd>\r\n          </dl>\r\n          <dl v-show=\"isSearchList\">\r\n            <dd v-for=\"search in searchList\" :key=\"search.id\">{{search}}</dd>\r\n          </dl>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Store from \"../utils/Store\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      search: \"\", //当前输入框的值\r\n      isFocus: false, //是否聚焦\r\n      hotSearchList: [\"暂无热门搜索\"], //热门搜索数据\r\n      historySearchList: [], //历史搜索数据\r\n      searchList: [\"暂无数据\"], //搜索返回数据,\r\n      history: false\r\n    };\r\n  },\r\n  methods: {\r\n    focus() {\r\n      this.isFocus = true;\r\n      this.historySearchList =\r\n        Store.loadHistory() == null ? [] : Store.loadHistory();\r\n      this.history = this.historySearchList.length == 0 ? false : true;\r\n    },\r\n    blur() {\r\n      var self = this;\r\n      this.searchBoxTimeout = setTimeout(function() {\r\n        self.isFocus = false;\r\n      }, 300);\r\n    },\r\n    enterSearchBoxHanlder() {\r\n      clearTimeout(this.searchBoxTimeout);\r\n    },\r\n    searchHandler() {\r\n      let exist =\r\n        this.historySearchList.filter(value => {\r\n          return value.name == this.search;\r\n        }).length == 0\r\n          ? false\r\n          : true;\r\n      if (!exist) {\r\n        this.historySearchList.push({ name: this.search, type: \"info\" });\r\n        Store.saveHistory(this.historySearchList);\r\n      }\r\n      this.history = this.historySearchList.length == 0 ? false : true;\r\n    },\r\n    closeHandler(search) {\r\n      this.historySearchList.splice(this.historySearchList.indexOf(search), 1);\r\n      Store.saveHistory(this.historySearchList);\r\n      clearTimeout(this.searchBoxTimeout);\r\n      if (this.historySearchList.length == 0) {\r\n        this.history = false;\r\n      }\r\n    },\r\n    removeAllHistory() {\r\n      Store.removeAllHistory();\r\n    }\r\n  },\r\n  computed: {\r\n    isHistorySearch() {\r\n      return this.isFocus && !this.search;\r\n    },\r\n    isSearchList() {\r\n      return this.isFocus && this.search;\r\n    },\r\n    isSearch() {\r\n      return this.isFocus;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.center {\r\n  margin-top: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n#search {\r\n  background-color: #409eff;\r\n  border-radius: 0%;\r\n  color: white;\r\n}\r\n.search-title {\r\n  color: #bdbaba;\r\n  font-size: 15px;\r\n  margin-bottom: 5px;\r\n}\r\n.remove-history {\r\n  color: #bdbaba;\r\n  font-size: 15px;\r\n  float: right;\r\n  margin-top: -22px;\r\n}\r\n#search-box {\r\n  width: 100%;\r\n  height: 300px;\r\n  margin-top: 0px;\r\n  padding-bottom: 20px;\r\n  text-align: left;\r\n}\r\n</style>"]}]}